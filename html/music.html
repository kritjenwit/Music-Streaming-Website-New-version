<div id="clear">
    <section id="new-release">
        <div class="container">
            <br>
            <h1 class="display-4">
                <a class="text-light" href="">All Music</a>
            </h1>
            <br>
            <div class="row">
                <div class="container table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <th>Cover</th>
                            <th>Music name</th>
                            <th>Artist</th>
                        </thead>
                        <tbody id="playlist">
                            <?php require "../php/music-and-album/show-all-music.php"; ?>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>
    <div class="script-here"></div>
</div>

<script>
    $(document).ready(function () {

        var load = 0;
        if (load == 0) {
            play();
            load = 1;
        }

    });

    function play() {
        // var currentsong = currentsong ;
        var isPlaying = !$("#audioPlayer")[0].paused && !$("#audioPlayer")[0].ended && $("#audioPlayer")[0].readyState >
            2;

        if (!isPlaying) {
            $("#audioPlayer")[0].play();
        }
        $("a.music").click(function (e) {
            e.preventDefault();
            currentsong = $(this).parent().parent().index();

            for (var i = 0; i < $("#audio-playlist li a").length; i++) {
                $("#audio-playlist ul").empty();
            }
            var k = 0;
            if (($("#audio-playlist li a").length < $("#playlist tr td a.music").length)) {
                for (var j = 0; j < $("#playlist tr td a.music").length; j++) {
                    $("#audio-playlist ul").append("<li> <a href music> </a> </li>");
                    $("#audio-playlist li a")[j].href = $("#playlist tr td a.music")[j].href;
                    var text = $("#playlist tr td a.music:eq(" + k + ")").attr('music');
                    $("#audio-playlist li a:eq(" + k + ")").html(text);
                    ++k;

                }
            }
            $("#audioPlayer")[0].src = this;
            $("#audioPlayer")[0].play();

            var title = $(this).text();
            $("#audio-title").html(title);
        });

        $("#audioPlayer")[0].addEventListener("ended", function () {
            currentsong++;
            if (currentsong == $("#playlist tr td a.music").length) {
                currentsong = 0;
            }
            $("#audioPlayer")[0].src = $("#playlist tr td a.music")[currentsong].href;
            $("#audioPlayer")[0].play();
        });

    //     $("#play").click(function (e) {
    //         e.preventDefault();
    //         $("#audioPlayer")[0].play();
    //     });
    //     $("#pause").click(function (e) {
    //         e.preventDefault();
    //         $("#audioPlayer")[0].pause();
    //     });

    //     $("#back").click(function (e) {
    //         e.preventDefault();
    //         currentsong--;
    //         console.log(currentsong + "back");

    //         if (currentsong < 0) {
    //             currentsong = $("#audio-playlist li a").length - 1;
    //             $("#audioPlayer")[0].src = $("#audio-playlist li a")[currentsong].href;
    //         } else {
    //             $("#audioPlayer")[0].src = $("#audio-playlist li a")[currentsong].href;

    //         }
    //         $("#audioPlayer")[0].play();
    //         var title = $("#playlist tr td a.music:eq(" + currentsong + ")").text();
    //         $("#audio-title").html(title);

    //         console.log(title);

    //     });
    //     $("#next").click(function (e) {
    //         e.preventDefault();

    //         currentsong++;
    //         console.log(currentsong + "next");

    //         if (currentsong >= $("#audio-playlist li a").length) {
    //             currentsong = 0;
    //             $("#audioPlayer")[0].src = $("#audio-playlist li a")[currentsong].href;
    //         } else {
    //             $("#audioPlayer")[0].src = $("#audio-playlist li a")[currentsong].href;

    //         }
    //         $("#audioPlayer")[0].play();
    //         var title = $("#audio-playlist li a:eq(" + currentsong + ")").text();
    //         $("#audio-title").html(title);

    //         console.log(title);

    //     });

    }
</script>